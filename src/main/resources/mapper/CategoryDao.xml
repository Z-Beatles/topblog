<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.waynechu.topblog.dao.CategoryDao">
	<select id="listCategory" parameterType="int" resultType="java.util.HashMap">
		SELECT t.category_id,t.category_name,COUNT(t.article_category_id) AS category_count
		FROM (
		    SELECT a.category_id,a.category_name,b.article_category_id
		    FROM t_category AS a 
		    LEFT JOIN t_article AS b 
		    ON a.category_id = b.article_category_id
		)AS t
		GROUP BY t.category_id
		LIMIT #{offset},#{limit}
	</select>
	
	<select id="countCategory" resultType="int">
        SELECT Count(category_id)
        FROM t_category
    </select>
    
    <select id="getCategory" resultType="java.util.HashMap">
        SELECT category_id,category_name FROM t_category
    </select>
    
    <insert id="addCategory" parameterType="String">
        INSERT INTO t_category(category_name) VALUES(#{categoryName});
    </insert>
    
</mapper>